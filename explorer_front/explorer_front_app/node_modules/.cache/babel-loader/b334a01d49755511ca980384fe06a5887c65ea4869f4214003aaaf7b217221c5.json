{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-6991b281\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  ref: \"mapContainer\",\n  class: \"map-container\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"iframe-popup\"\n};\nconst _hoisted_3 = [\"src\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, null, 512 /* NEED_PATCH */), $data.showPopup ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createElementVNode(\"iframe\", {\n    src: _ctx.popupUrl,\n    frameborder: \"0\"\n  }, null, 8 /* PROPS */, _hoisted_3)])) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["ref","class","key","_createElementBlock","_Fragment","_createElementVNode","_hoisted_1","$data","showPopup","_hoisted_2","src","_ctx","popupUrl","frameborder","_hoisted_3","_createCommentVNode"],"sources":["/home/zhu/Documents/github/explorer_front/explorer_front_app/src/components/GalapagosMap.vue"],"sourcesContent":["<template>\n  <div ref=\"mapContainer\" class=\"map-container\"></div>\n  <div v-if=\"showPopup\" class=\"iframe-popup\">\n    <iframe :src=\"popupUrl\" frameborder=\"0\"></iframe>\n  </div>\n\n</template>\n\n\n\n<script>\nimport ref from 'vue';\nimport L from 'leaflet';\n\nimport markerImage from '@/assets/marker.png'\n\nimport 'leaflet-draw/dist/leaflet.draw.css';\nimport 'leaflet-draw/dist/leaflet.draw';\n\nexport default {\n mounted(){\n    //const mapContainer = ref(null);\n\n      this.map = L.map(this.$ref.mapContainer.value).setView([-0.207259, -90.142578], 8); // Center coordinates of Hawaii, zoom level 8\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(this.map);\n      \n      this.addMarkers();\n\n      var drawnItems = new L.FeatureGroup();\n      this.map.addLayer(drawnItems);\n\n      var drawControl = new L.Control.Draw({\n        draw: {\n          polygon: true,\n          polyline: false,\n          rectangle: false,\n          circle: false,\n          marker: false,\n        },\n        edit: {\n          featureGroup: drawnItems,\n          edit: false,\n          remove: false,\n        },\n      });\n      this.map.addControl(drawControl);\n\n      this.map.on(L.Draw.Event.CREATED, function (event) {\n      var layer = event.layer;\n      drawnItems.addLayer(layer);\n\n      // Do something with the drawn polygon, like getting its coordinates\n      var polygonCoordinates = layer.getLatLngs();\n      console.log(\"layer info\", layer);\n      var geoJSON = layer.toGeoJSON();\n      console.log(\"geoJSON: \", geoJSON);\n      console.log(JSON.stringify(geoJSON.geometry.coordinates));\n      console.log(polygonCoordinates);\n      console.log(JSON.stringify(polygonCoordinates));\n\n      layer.bindPopup('<p>Island <br>'+JSON.stringify(geoJSON)+'</p>');\n      });\n\n\n    //return { mapContainer };\n  },\n  methods: {\n    addMarkers(){\n\n       var myIcon = L.icon({\n      //iconUrl: require('./src/assets/marker.png'),\n      iconUrl: markerImage,\n      //iconSize: [38, 95],\n      //iconAnchor: [22, 94],\n      //popupAnchor: [-3, -76],\n      //shadowUrl: ,\n      //shadowSize: [68, 95],\n      //shadowAnchor: [22, 94]\n      });\n\n      this.markers = [\n        L.marker([-0.0358333333, -91.3761111111], {icon: myIcon}).bindPopup('turtle').addTo(this.map),\n        L.marker([-1.3541666667,  -89.6598611111], {icon: myIcon}).bindPopup('iguana').addTo(this.map)\n      ];\n\n      this.setupMarkerClickEvents();\n   },\n\n    setupMarkerClickEvents(){\n      \n      this.markers.forEach(marker => {\n        marker.on('click', () =>{\n          this.openPopup(marker);\n        });\n      });\n   },\n\n   openPopup(marker){\n      this.popupURL = marker.getPopup().getContent();\n      this.showPopup = true;\n   },\n\n   },\n   data(){\n\n    return{\n      map: null,\n      markers: [],\n      showPopup: false,\n      popupURL: 'https://www.morphosource.org/uv.html#?manifest=/manifests/44b0cd03-9165-4367-b20a-8ed303a2f3c4',\n    };\n\n   },\n};\n\n</script>\n\n<style scoped>\n.map-container {\n  height: 400px; /* Set map container height */\n}\n\n.iframe-popup {\n  position: fixed;\n  top: 0;\n  right: 0;\n  width: 300px; /* Adjust as needed */\n  height: 100%;\n  background-color: white;\n  z-index: 1000;\n}\n\niframe {\n  width: 100%;\n  height: 100%;\n}\n</style>"],"mappings":";;;EACOA,GAAG,EAAC,cAAc;EAACC,KAAK,EAAC;;;EADhCC,GAAA;EAEwBD,KAAK,EAAC;;mBAF9B;;uBAAAE,mBAAA,CAAAC,SAAA,SACEC,mBAAA,CAAoD,OAApDC,UAAoD,+BACzCC,KAAA,CAAAC,SAAS,I,cAApBL,mBAAA,CAEM,OAFNM,UAEM,GADJJ,mBAAA,CAAiD;IAAxCK,GAAG,EAAEC,IAAA,CAAAC,QAAQ;IAAEC,WAAW,EAAC;0BAHxCC,UAAA,E,KAAAC,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}