{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport * as THREE from 'three';\nimport image from '../../public/assets/skullbottom.jpg';\nimport { PLYLoader } from 'three/examples/jsm/loaders/PLYLoader.js';\nimport { TextureLoader } from 'three/src/loaders/TextureLoader.js';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\nexport default {\n  __name: 'ThreeJSRenderer',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const container = ref(null);\n    onMounted(() => {\n      if (!container.value) {\n        console.error('Container element not found');\n        return;\n      }\n      let scene = new THREE.Scene();\n      // const camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 1000);\n      let camera = new THREE.PerspectiveCamera(35, window.innerWidth / window.innerHeight, 0.1, 2000);\n      camera.position.set(200, .15, 3);\n      camera.updateProjectionMatrix();\n      scene.add(new THREE.AmbientLight(0xffffff, 1));\n      var light = new THREE.PointLight(0xffffff, 1);\n      light.position.set(100, 2, 3);\n      scene.add(camera);\n      scene.add(light);\n      const renderer = new THREE.WebGLRenderer();\n      renderer.setSize(window.innerWidth, window.innerHeight);\n      container.value.appendChild(renderer.domElement);\n      const controls = new OrbitControls(camera, renderer.domElement);\n      controls.enableDamping = true;\n      controls.dampingFactor = 0.25;\n      controls.enableZoom = true;\n      // console.log(image);\n\n      const textureLoader = new TextureLoader();\n      const texture = textureLoader.load(image, texture => {\n        console.log(texture);\n        texture.wrapS = texture.wrapT = THREE.RepeatWrapping;\n        texture.repeat.set(1, 1);\n      });\n      const plyLoader = new PLYLoader();\n      plyLoader.load('/assets/skullbottom.ply', geometry => {\n        //console.log(plyLoader);\n        //textureLoader.load('/assets/skullbottom.jpg', (texture) => {\n        geometry.computeVertexNormals();\n        const material = new THREE.MeshPhysicalMaterial({\n          map: texture\n        });\n        let mesh = new THREE.Mesh(geometry, material);\n        scene.add(mesh);\n      });\n      camera.position.z = 5;\n      const animate = () => {\n        requestAnimationFrame(animate);\n        controls.update();\n        //mesh.rotation.y += 0.01;\n        renderer.render(scene, camera);\n      };\n      //console.log(texture)\n      animate();\n      window.addEventListener('resize', () => {\n        camera.aspect = window.innerWidth / window.innerHeight;\n        camera.updateProjectionMatrix();\n        renderer.setSize(window.innerWidth, window.innerHeight);\n      });\n      return () => {\n        window.removeEventListener('resize', () => {\n          camera.aspect = window.innerWidth / window.innerHeight;\n          camera.updateProjectionMatrix();\n          renderer.setSize(window.innerWidth, window.innerHeight);\n        });\n      };\n    });\n    const __returned__ = {\n      container,\n      ref,\n      onMounted,\n      get THREE() {\n        return THREE;\n      },\n      get image() {\n        return image;\n      },\n      get PLYLoader() {\n        return PLYLoader;\n      },\n      get TextureLoader() {\n        return TextureLoader;\n      },\n      get OrbitControls() {\n        return OrbitControls;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","THREE","image","PLYLoader","TextureLoader","OrbitControls","container","value","console","error","scene","Scene","camera","PerspectiveCamera","window","innerWidth","innerHeight","position","set","updateProjectionMatrix","add","AmbientLight","light","PointLight","renderer","WebGLRenderer","setSize","appendChild","domElement","controls","enableDamping","dampingFactor","enableZoom","textureLoader","texture","load","log","wrapS","wrapT","RepeatWrapping","repeat","plyLoader","geometry","computeVertexNormals","material","MeshPhysicalMaterial","map","mesh","Mesh","z","animate","requestAnimationFrame","update","render","addEventListener","aspect","removeEventListener"],"sources":["/home/zhu/Documents/github/explorer_front/explorer_front_app/src/components/ThreeJSRenderer.vue"],"sourcesContent":["<template>\n  <div ref=\"container\"></div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue';\nimport * as THREE from 'three';\nimport image from '../../public/assets/skullbottom.jpg';\nimport { PLYLoader } from 'three/examples/jsm/loaders/PLYLoader.js';\nimport { TextureLoader } from 'three/src/loaders/TextureLoader.js';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls.js';\n\nconst container = ref(null);\n\nonMounted(() => {\n  if (!container.value) {\n    console.error('Container element not found');\n    return;\n  }\n\n  let scene = new THREE.Scene();\n  // const camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 1000);\n  let camera = new THREE.PerspectiveCamera(35, window.innerWidth / window.innerHeight, 0.1, 2000);\n  camera.position.set(200, .15, 3);\n  camera.updateProjectionMatrix();\n  scene.add( new THREE.AmbientLight( 0xffffff, 1 ) );\n  var light = new THREE.PointLight( 0xffffff, 1 );\n  light.position.set(100, 2, 3);\n  scene.add(camera); \n  scene.add(light);\n  \n  const renderer = new THREE.WebGLRenderer();\n  renderer.setSize(window.innerWidth, window.innerHeight);\n  container.value.appendChild(renderer.domElement);\n\n  const controls = new OrbitControls(camera, renderer.domElement);\n  controls.enableDamping = true;\n  controls.dampingFactor = 0.25;\n  controls.enableZoom = true;\n  // console.log(image);\n\n  const textureLoader = new TextureLoader();\n  const texture = textureLoader.load(image, (texture) => { \n      console.log(texture); \n      texture.wrapS = texture.wrapT = THREE.RepeatWrapping;\n      texture.repeat.set(1,1);\n  });\n\n  const plyLoader = new PLYLoader();\n  plyLoader.load('/assets/skullbottom.ply', (geometry) => {\n    //console.log(plyLoader);\n    //textureLoader.load('/assets/skullbottom.jpg', (texture) => {\n    geometry.computeVertexNormals();\n\n    const material = new THREE.MeshPhysicalMaterial({ map: texture });\n    let mesh = new THREE.Mesh(geometry, material);\n    scene.add(mesh);\n  });\n\n    camera.position.z = 5;\n\n    const animate = () => {\n      requestAnimationFrame(animate);\n      controls.update();\n      //mesh.rotation.y += 0.01;\n      renderer.render(scene, camera);\n    };\n      //console.log(texture)\n    animate();\n\n\n  window.addEventListener('resize', () => {\n    camera.aspect = window.innerWidth / window.innerHeight;\n    camera.updateProjectionMatrix();\n    renderer.setSize(window.innerWidth, window.innerHeight);\n  });\n\n  return () => {\n    window.removeEventListener('resize', () => {\n      camera.aspect = window.innerWidth / window.innerHeight;\n      camera.updateProjectionMatrix();\n      renderer.setSize(window.innerWidth, window.innerHeight);\n    });\n  };\n});\n</script>\n\n<style>\n  #container {\n    width: 100%;\n    height: 100vh;\n    overflow: hidden;\n  }\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}