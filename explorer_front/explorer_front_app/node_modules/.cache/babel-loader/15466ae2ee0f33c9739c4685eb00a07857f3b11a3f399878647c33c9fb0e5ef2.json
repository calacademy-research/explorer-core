{"ast":null,"code":"import axios from 'axios';\nimport Plotly from 'plotly.js/lib/core';\nexport default {\n  data() {\n    return {\n      totalCollections: 0\n    };\n  },\n  mounted() {\n    axios.get('http://0.0.0.0:8000/collection/').then(response => {\n      // Assuming your API response contains a 'count' field for total collections\n      this.collectionsData = response.data;\n      console.log(this.collectionsData);\n      console.log(this.collectionsData.Date);\n      this.createBarChart();\n    }).catch(error => {\n      console.error('Error fetching data:', error);\n    });\n  },\n  methods: {\n    createBarChart() {\n      const aggregatedAmounts = {};\n      const collectionsdata = this.collectionsData;\n      for (let i = 0; i < collectionsdata['Date'].length; i++) {\n        const year = collectionsdata['Date'][i].substring(0, 4);\n        console.log(year);\n        if (!aggregatedAmounts[year]) {\n          aggregatedAmounts[year] = collectionsdata['Collections'][i];\n        } else {\n          aggregatedAmounts[year] += collectionsdata['Collections'][i];\n        }\n      }\n      console.log(aggregatedAmounts);\n      const xValues = Object.keys(aggregatedAmounts);\n      const yValues = Object.values(aggregatedAmounts);\n      const data = [{\n        x: xValues,\n        y: yValues,\n        type: 'bar'\n      }];\n      console.log(data);\n      const layout = {\n        title: 'Collections Over Time (by Year)',\n        xaxis: {\n          title: 'Year'\n        },\n        yaxis: {\n          title: 'Total Amount'\n        },\n        barmode: 'stack' // Stacked bar mode\n      };\n      Plotly.newPlot('stacked-bar-chart', data, layout);\n    }\n  }\n};","map":{"version":3,"names":["axios","Plotly","data","totalCollections","mounted","get","then","response","collectionsData","console","log","Date","createBarChart","catch","error","methods","aggregatedAmounts","collectionsdata","i","length","year","substring","xValues","Object","keys","yValues","values","x","y","type","layout","title","xaxis","yaxis","barmode","newPlot"],"sources":["/home/zhu/Documents/github/explorer_front/explorer_front_app/src/components/explorerDashboard.vue"],"sourcesContent":["<template>\n  <div>\n    <h1>Collections Dashboard</h1>\n    <div id=\"stacked-bar-chart\"></div>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios';\nimport Plotly from 'plotly.js/lib/core';\n\nexport default {\n  data() {\n    return {\n      totalCollections: 0\n    };\n  },\n  mounted() {\n    axios.get('http://0.0.0.0:8000/collection/')\n      .then(response => {\n        // Assuming your API response contains a 'count' field for total collections\n        this.collectionsData = response.data;\n        console.log(this.collectionsData)\n        console.log(this.collectionsData.Date)\n\n        this.createBarChart();\n      })\n      .catch(error => {\n        console.error('Error fetching data:', error);\n      });\n  },\n  methods: {\n    createBarChart(){\n      \n      const aggregatedAmounts = {};\n      const collectionsdata = this.collectionsData\n\n      for(let i = 0; i < collectionsdata['Date'].length; i++){\n        const year = collectionsdata['Date'][i].substring(0,4);\n        console.log(year)\n        if(!aggregatedAmounts[year]){\n          aggregatedAmounts[year] = collectionsdata['Collections'][i];\n        } else{\n          aggregatedAmounts[year] += collectionsdata['Collections'][i];\n        }\n      }\n      \n      console.log(aggregatedAmounts)\n      const xValues = Object.keys(aggregatedAmounts);\n      const yValues = Object.values(aggregatedAmounts);\n\n      const data = [{\n        x: xValues,\n        y: yValues,\n        type: 'bar'\n      }];\n\n      console.log(data)\n\n      const layout = {\n        title: 'Collections Over Time (by Year)',\n        xaxis: { title: 'Year' },\n        yaxis: { title: 'Total Amount' },\n        barmode: 'stack' // Stacked bar mode\n      };\n\n      Plotly.newPlot('stacked-bar-chart', data, layout);\n    }\n  }\n};\n</script>\n\n\n\n<style scoped>\n/* Add any custom styles here */\n</style>\n"],"mappings":"AAQA,OAAOA,KAAI,MAAO,OAAO;AACzB,OAAOC,MAAK,MAAO,oBAAoB;AAEvC,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,gBAAgB,EAAE;IACpB,CAAC;EACH,CAAC;EACDC,OAAOA,CAAA,EAAG;IACRJ,KAAK,CAACK,GAAG,CAAC,iCAAiC,EACxCC,IAAI,CAACC,QAAO,IAAK;MAChB;MACA,IAAI,CAACC,eAAc,GAAID,QAAQ,CAACL,IAAI;MACpCO,OAAO,CAACC,GAAG,CAAC,IAAI,CAACF,eAAe;MAChCC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACF,eAAe,CAACG,IAAI;MAErC,IAAI,CAACC,cAAc,CAAC,CAAC;IACvB,CAAC,EACAC,KAAK,CAACC,KAAI,IAAK;MACdL,OAAO,CAACK,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC9C,CAAC,CAAC;EACN,CAAC;EACDC,OAAO,EAAE;IACPH,cAAcA,CAAA,EAAE;MAEd,MAAMI,iBAAgB,GAAI,CAAC,CAAC;MAC5B,MAAMC,eAAc,GAAI,IAAI,CAACT,eAAc;MAE3C,KAAI,IAAIU,CAAA,GAAI,CAAC,EAAEA,CAAA,GAAID,eAAe,CAAC,MAAM,CAAC,CAACE,MAAM,EAAED,CAAC,EAAE,EAAC;QACrD,MAAME,IAAG,GAAIH,eAAe,CAAC,MAAM,CAAC,CAACC,CAAC,CAAC,CAACG,SAAS,CAAC,CAAC,EAAC,CAAC,CAAC;QACtDZ,OAAO,CAACC,GAAG,CAACU,IAAI;QAChB,IAAG,CAACJ,iBAAiB,CAACI,IAAI,CAAC,EAAC;UAC1BJ,iBAAiB,CAACI,IAAI,IAAIH,eAAe,CAAC,aAAa,CAAC,CAACC,CAAC,CAAC;QAC7D,OAAM;UACJF,iBAAiB,CAACI,IAAI,KAAKH,eAAe,CAAC,aAAa,CAAC,CAACC,CAAC,CAAC;QAC9D;MACF;MAEAT,OAAO,CAACC,GAAG,CAACM,iBAAiB;MAC7B,MAAMM,OAAM,GAAIC,MAAM,CAACC,IAAI,CAACR,iBAAiB,CAAC;MAC9C,MAAMS,OAAM,GAAIF,MAAM,CAACG,MAAM,CAACV,iBAAiB,CAAC;MAEhD,MAAMd,IAAG,GAAI,CAAC;QACZyB,CAAC,EAAEL,OAAO;QACVM,CAAC,EAAEH,OAAO;QACVI,IAAI,EAAE;MACR,CAAC,CAAC;MAEFpB,OAAO,CAACC,GAAG,CAACR,IAAI;MAEhB,MAAM4B,MAAK,GAAI;QACbC,KAAK,EAAE,iCAAiC;QACxCC,KAAK,EAAE;UAAED,KAAK,EAAE;QAAO,CAAC;QACxBE,KAAK,EAAE;UAAEF,KAAK,EAAE;QAAe,CAAC;QAChCG,OAAO,EAAE,OAAM,CAAE;MACnB,CAAC;MAEDjC,MAAM,CAACkC,OAAO,CAAC,mBAAmB,EAAEjC,IAAI,EAAE4B,MAAM,CAAC;IACnD;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}