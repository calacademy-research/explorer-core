{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport L from 'leaflet';\nimport markerImage from '@/assets/marker.png';\nimport 'leaflet-draw/dist/leaflet.draw.css';\nimport 'leaflet-draw/dist/leaflet.draw';\nconst mapContainer = ref(null);\nconst showPopup = ref(false);\nlet map;\nlet markers = [];\nonMounted(() => {\n  map = L.map(mapContainer.value).setView([-0.207259, -90.142578], 8); // Center coordinates of Hawaii, zoom level 8\n  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);\n  addMarkers();\n  setupMarkerClickEvents();\n  var drawnItems = new L.FeatureGroup();\n  map.addLayer(drawnItems);\n  var drawControl = new L.Control.Draw({\n    draw: {\n      polygon: true,\n      polyline: false,\n      rectangle: false,\n      circle: false,\n      marker: false\n    },\n    edit: {\n      featureGroup: drawnItems,\n      edit: false,\n      remove: false\n    }\n  });\n  map.addControl(drawControl);\n  map.on(L.Draw.Event.CREATED, function (event) {\n    var layer = event.layer;\n    drawnItems.addLayer(layer);\n\n    // Do something with the drawn polygon, like getting its coordinates\n    var polygonCoordinates = layer.getLatLngs();\n    console.log(\"layer info\", layer);\n    var geoJSON = layer.toGeoJSON();\n    console.log(\"geoJSON: \", geoJSON);\n    console.log(JSON.stringify(geoJSON.geometry.coordinates));\n    console.log(polygonCoordinates);\n    console.log(JSON.stringify(polygonCoordinates));\n    layer.bindPopup('<p>Island <br>' + JSON.stringify(geoJSON) + '</p>');\n  });\n\n  //return { mapContainer };\n});\nfunction addMarkers() {\n  var myIcon = L.icon({\n    //iconUrl: require('./src/assets/marker.png'),\n    iconUrl: markerImage\n    //iconSize: [38, 95],\n    //iconAnchor: [22, 94],\n    //popupAnchor: [-3, -76],\n    //shadowUrl: ,\n    //shadowSize: [68, 95],\n    //shadowAnchor: [22, 94]\n  });\n  markers = [L.marker([-0.0358333333, -91.3761111111], {\n    icon: myIcon\n  }).bindPopup('turtle').addTo(map), L.marker([-1.3541666667, -89.6598611111], {\n    icon: myIcon\n  }).bindPopup('iguana').addTo(map)];\n}\nfunction setupMarkerClickEvents() {\n  markers.forEach(marker => {\n    marker.on('click', () => {\n      openPopup(marker);\n    });\n  });\n}\nfunction openPopup(marker) {\n  popupURL.value = marker.getPopup().getContent();\n  showPopup.value = true;\n}\nconst popupURL = ref('');","map":{"version":3,"names":["ref","onMounted","L","markerImage","mapContainer","showPopup","map","markers","value","setView","tileLayer","addTo","addMarkers","setupMarkerClickEvents","drawnItems","FeatureGroup","addLayer","drawControl","Control","Draw","draw","polygon","polyline","rectangle","circle","marker","edit","featureGroup","remove","addControl","on","Event","CREATED","event","layer","polygonCoordinates","getLatLngs","console","log","geoJSON","toGeoJSON","JSON","stringify","geometry","coordinates","bindPopup","myIcon","icon","iconUrl","forEach","openPopup","popupURL","getPopup","getContent"],"sources":["/home/zhu/Documents/github/explorer_front/explorer_front_app/src/components/GalapagosMap.vue"],"sourcesContent":["<template>\n  <div ref=\"mapContainer\" class=\"map-container\"></div>\n  <div v-if=\"showPopup\" class=\"iframe-popup\">\n    <iframe :src=\"popupUrl\" frameborder=\"0\"></iframe>\n  </div>\n\n</template>\n\n\n\n<script>\nimport {ref, onMounted} from 'vue';\nimport L from 'leaflet';\n\nimport markerImage from '@/assets/marker.png'\n\nimport 'leaflet-draw/dist/leaflet.draw.css';\nimport 'leaflet-draw/dist/leaflet.draw';\n\nconst mapContainer = ref(null);\nconst showPopup = ref(false);\nlet map;\nlet markers = [];\n\nonMounted(() => {\n      map = L.map(mapContainer.value).setView([-0.207259, -90.142578], 8); // Center coordinates of Hawaii, zoom level 8\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);\n      \n      addMarkers();\n      setupMarkerClickEvents();\n\n      var drawnItems = new L.FeatureGroup();\n      map.addLayer(drawnItems);\n\n      var drawControl = new L.Control.Draw({\n        draw: {\n          polygon: true,\n          polyline: false,\n          rectangle: false,\n          circle: false,\n          marker: false,\n        },\n        edit: {\n          featureGroup: drawnItems,\n          edit: false,\n          remove: false,\n        },\n      });\n\n      map.addControl(drawControl);\n\n      map.on(L.Draw.Event.CREATED, function (event) {\n      var layer = event.layer;\n      drawnItems.addLayer(layer);\n\n      // Do something with the drawn polygon, like getting its coordinates\n      var polygonCoordinates = layer.getLatLngs();\n      console.log(\"layer info\", layer);\n      var geoJSON = layer.toGeoJSON();\n      console.log(\"geoJSON: \", geoJSON);\n      console.log(JSON.stringify(geoJSON.geometry.coordinates));\n      console.log(polygonCoordinates);\n      console.log(JSON.stringify(polygonCoordinates));\n\n      layer.bindPopup('<p>Island <br>'+JSON.stringify(geoJSON)+'</p>');\n      });\n\n\n    //return { mapContainer };\n  });\n  \n  function addMarkers(){\n\n       var myIcon = L.icon({\n        //iconUrl: require('./src/assets/marker.png'),\n        iconUrl: markerImage,\n        //iconSize: [38, 95],\n        //iconAnchor: [22, 94],\n        //popupAnchor: [-3, -76],\n        //shadowUrl: ,\n        //shadowSize: [68, 95],\n        //shadowAnchor: [22, 94]\n      });\n\n      markers = [\n        L.marker([-0.0358333333, -91.3761111111], {icon: myIcon}).bindPopup('turtle').addTo(map),\n        L.marker([-1.3541666667,  -89.6598611111], {icon: myIcon}).bindPopup('iguana').addTo(map)\n      ];\n   }\n\n  function setupMarkerClickEvents(){\n      \n      markers.forEach(marker => {\n        marker.on('click', () =>{\n          openPopup(marker);\n        });\n      });\n   }\n\n  function openPopup(marker){\n      popupURL.value = marker.getPopup().getContent();\n      showPopup.value = true;\n   }\n   \nconst popupURL = ref('');\n\n</script>\n\n<style scoped>\n.map-container {\n  height: 400px; /* Set map container height */\n}\n\n.iframe-popup {\n  position: fixed;\n  top: 0;\n  right: 0;\n  width: 300px; /* Adjust as needed */\n  height: 100%;\n  background-color: white;\n  z-index: 1000;\n}\n\niframe {\n  width: 100%;\n  height: 100%;\n}\n</style>"],"mappings":"AAWA,SAAQA,GAAG,EAAEC,SAAS,QAAO,KAAK;AAClC,OAAOC,CAAA,MAAO,SAAS;AAEvB,OAAOC,WAAU,MAAO,qBAAoB;AAE5C,OAAO,oCAAoC;AAC3C,OAAO,gCAAgC;AAEvC,MAAMC,YAAW,GAAIJ,GAAG,CAAC,IAAI,CAAC;AAC9B,MAAMK,SAAQ,GAAIL,GAAG,CAAC,KAAK,CAAC;AAC5B,IAAIM,GAAG;AACP,IAAIC,OAAM,GAAI,EAAE;AAEhBN,SAAS,CAAC,MAAM;EACVK,GAAE,GAAIJ,CAAC,CAACI,GAAG,CAACF,YAAY,CAACI,KAAK,CAAC,CAACC,OAAO,CAAC,CAAC,CAAC,QAAQ,EAAE,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC,EAAE;EACrEP,CAAC,CAACQ,SAAS,CAAC,oDAAoD,CAAC,CAACC,KAAK,CAACL,GAAG,CAAC;EAE5EM,UAAU,CAAC,CAAC;EACZC,sBAAsB,CAAC,CAAC;EAExB,IAAIC,UAAS,GAAI,IAAIZ,CAAC,CAACa,YAAY,CAAC,CAAC;EACrCT,GAAG,CAACU,QAAQ,CAACF,UAAU,CAAC;EAExB,IAAIG,WAAU,GAAI,IAAIf,CAAC,CAACgB,OAAO,CAACC,IAAI,CAAC;IACnCC,IAAI,EAAE;MACJC,OAAO,EAAE,IAAI;MACbC,QAAQ,EAAE,KAAK;MACfC,SAAS,EAAE,KAAK;MAChBC,MAAM,EAAE,KAAK;MACbC,MAAM,EAAE;IACV,CAAC;IACDC,IAAI,EAAE;MACJC,YAAY,EAAEb,UAAU;MACxBY,IAAI,EAAE,KAAK;MACXE,MAAM,EAAE;IACV;EACF,CAAC,CAAC;EAEFtB,GAAG,CAACuB,UAAU,CAACZ,WAAW,CAAC;EAE3BX,GAAG,CAACwB,EAAE,CAAC5B,CAAC,CAACiB,IAAI,CAACY,KAAK,CAACC,OAAO,EAAE,UAAUC,KAAK,EAAE;IAC9C,IAAIC,KAAI,GAAID,KAAK,CAACC,KAAK;IACvBpB,UAAU,CAACE,QAAQ,CAACkB,KAAK,CAAC;;IAE1B;IACA,IAAIC,kBAAiB,GAAID,KAAK,CAACE,UAAU,CAAC,CAAC;IAC3CC,OAAO,CAACC,GAAG,CAAC,YAAY,EAAEJ,KAAK,CAAC;IAChC,IAAIK,OAAM,GAAIL,KAAK,CAACM,SAAS,CAAC,CAAC;IAC/BH,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEC,OAAO,CAAC;IACjCF,OAAO,CAACC,GAAG,CAACG,IAAI,CAACC,SAAS,CAACH,OAAO,CAACI,QAAQ,CAACC,WAAW,CAAC,CAAC;IACzDP,OAAO,CAACC,GAAG,CAACH,kBAAkB,CAAC;IAC/BE,OAAO,CAACC,GAAG,CAACG,IAAI,CAACC,SAAS,CAACP,kBAAkB,CAAC,CAAC;IAE/CD,KAAK,CAACW,SAAS,CAAC,gBAAgB,GAACJ,IAAI,CAACC,SAAS,CAACH,OAAO,CAAC,GAAC,MAAM,CAAC;EAChE,CAAC,CAAC;;EAGJ;AACF,CAAC,CAAC;AAEF,SAAS3B,UAAUA,CAAA,EAAE;EAEhB,IAAIkC,MAAK,GAAI5C,CAAC,CAAC6C,IAAI,CAAC;IACnB;IACAC,OAAO,EAAE7C;IACT;IACA;IACA;IACA;IACA;IACA;EACF,CAAC,CAAC;EAEFI,OAAM,GAAI,CACRL,CAAC,CAACuB,MAAM,CAAC,CAAC,CAAC,YAAY,EAAE,CAAC,aAAa,CAAC,EAAE;IAACsB,IAAI,EAAED;EAAM,CAAC,CAAC,CAACD,SAAS,CAAC,QAAQ,CAAC,CAAClC,KAAK,CAACL,GAAG,CAAC,EACxFJ,CAAC,CAACuB,MAAM,CAAC,CAAC,CAAC,YAAY,EAAG,CAAC,aAAa,CAAC,EAAE;IAACsB,IAAI,EAAED;EAAM,CAAC,CAAC,CAACD,SAAS,CAAC,QAAQ,CAAC,CAAClC,KAAK,CAACL,GAAG,EACzF;AACJ;AAED,SAASO,sBAAsBA,CAAA,EAAE;EAE7BN,OAAO,CAAC0C,OAAO,CAACxB,MAAK,IAAK;IACxBA,MAAM,CAACK,EAAE,CAAC,OAAO,EAAE,MAAK;MACtBoB,SAAS,CAACzB,MAAM,CAAC;IACnB,CAAC,CAAC;EACJ,CAAC,CAAC;AACL;AAED,SAASyB,SAASA,CAACzB,MAAM,EAAC;EACtB0B,QAAQ,CAAC3C,KAAI,GAAIiB,MAAM,CAAC2B,QAAQ,CAAC,CAAC,CAACC,UAAU,CAAC,CAAC;EAC/ChD,SAAS,CAACG,KAAI,GAAI,IAAI;AACzB;AAEH,MAAM2C,QAAO,GAAInD,GAAG,CAAC,EAAE,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}