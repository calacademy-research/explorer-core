{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { onMounted, ref } from 'vue';\nimport L from 'leaflet';\nimport \"leaflet/dist/leaflet.css\";\nimport axios from 'axios';\nimport markerImage from '@/assets/marker.png';\nconst __default__ = {\n  data() {\n    return {\n      popupOptions: {\n        maxWidth: 200\n      } // Customize popup options\n    };\n  },\n  methods: {\n    openPopup(marker) {\n      console.log('Clicked marker:', marker);\n    }\n  }\n};\nexport default /*#__PURE__*/Object.assign(__default__, {\n  __name: 'explorerMap',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const mapContainer = ref(null);\n    let map;\n    let popupString;\n    let markers = [];\n    onMounted(() => {\n      map = L.map(mapContainer.value).setView([0, 0], 2);\n      //map = L.map(mapContainer.value).fitWorld();\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n        attribution: '&copy; OpenStreetMap contributors'\n      }).addTo(map);\n\n      //   const bounds = [[-90, -180], [90, 180]]\n      //   map.fitBounds(bounds);\n\n      fetchCoordinates();\n\n      //   map.on('click', (event) => {\n      //     handleMapClick(event.latlng);\n      //   });\n    });\n    async function fetchCoordinates() {\n      var myIcon = L.icon({\n        //iconUrl: require('./src/assets/marker.png'),\n        iconUrl: markerImage,\n        //iconSize: [38, 95],\n        iconAnchor: [22, 94],\n        popupAnchor: [-3, -76]\n        //shadowUrl: ,\n        //shadowSize: [68, 95],\n        //shadowAnchor: [22, 94]\n      });\n      try {\n        const response = await axios.get('http://0.0.0.0:8000/collection_map/');\n        let data = response.data; // Assuming the API response is an array of marker data\n        console.log(data);\n        data = JSON.parse(data);\n        // console.log(typeof(data2))\n        // console.log(data2.length)\n        // console.log(data2[0])\n        data.forEach(item => {\n          console.log(item);\n          console.log(item.Latitude);\n          console.log(parseFloat(item.Latitude));\n          const marker = L.marker([parseFloat(item.Latitude), parseFloat(item.Longitude)], {\n            icon: myIcon\n          }).addTo(map);\n          if (item.Remarks != null) {\n            popupString = \"<i>\\\"\" + item.Remarks + \"\\\"</i><br>\" + item.Start;\n          } else {\n            popupString = item.Start;\n          }\n          //marker.bindPopup('<br>Hi CAS!</br>').openPopup();\n          marker.bindPopup(popupString).openPopup();\n          markers.push(marker);\n        });\n      } catch (error) {\n        console.error('Error fetching data:', error);\n      }\n    }\n\n    // function handleMapClick(latLng) {\n    //   console.log('Clicked coordinates:', latLng.lat, latLng.lng);\n    //   addMarker({ lat: latLng.lat, lng: latLng.lng });\n    // }\n\n    // function addMarker(position) {\n    //   const marker = L.marker(position).addTo(map);\n    //   markers.push(marker);\n\n    //   marker.on('click', () => {\n    //     handleMarkerClick(marker);\n    //   });\n    // }\n\n    // function handleMarkerClick(marker) {\n    //   console.log('Clicked marker:', marker);\n    //   // Add your logic for handling marker click events here\n    // }\n\n    const __returned__ = {\n      mapContainer,\n      get map() {\n        return map;\n      },\n      set map(v) {\n        map = v;\n      },\n      get popupString() {\n        return popupString;\n      },\n      set popupString(v) {\n        popupString = v;\n      },\n      get markers() {\n        return markers;\n      },\n      set markers(v) {\n        markers = v;\n      },\n      fetchCoordinates,\n      onMounted,\n      ref,\n      get L() {\n        return L;\n      },\n      get axios() {\n        return axios;\n      },\n      get markerImage() {\n        return markerImage;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n});","map":{"version":3,"names":["onMounted","ref","L","axios","markerImage","__default__","data","popupOptions","maxWidth","methods","openPopup","marker","console","log","mapContainer","map","popupString","markers","value","setView","tileLayer","attribution","addTo","fetchCoordinates","myIcon","icon","iconUrl","iconAnchor","popupAnchor","response","get","JSON","parse","forEach","item","Latitude","parseFloat","Longitude","Remarks","Start","bindPopup","push","error"],"sources":["/home/zhu/Documents/github/explorer_front/explorer_front_app/src/components/explorerMap.vue"],"sourcesContent":["<template>\n  <div ref=\"mapContainer\" style=\"width: 60%; height: 800px;\"></div>\n</template>\n\n<script setup>\nimport { onMounted, ref } from 'vue';\nimport L from 'leaflet';\nimport \"leaflet/dist/leaflet.css\";\nimport axios from 'axios';\nimport markerImage from '@/assets/marker.png'\n\nconst mapContainer = ref(null);\nlet map;\nlet popupString;\nlet markers = [];\n\nonMounted(() => {\n   map = L.map(mapContainer.value).setView([0,0],2);\n    //map = L.map(mapContainer.value).fitWorld();\n  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    attribution: '&copy; OpenStreetMap contributors',\n  }).addTo(map);\n\n//   const bounds = [[-90, -180], [90, 180]]\n//   map.fitBounds(bounds);\n\n    fetchCoordinates();\n\n//   map.on('click', (event) => {\n//     handleMapClick(event.latlng);\n//   });\n});\n\nasync function fetchCoordinates(){\n    var myIcon = L.icon({\n    //iconUrl: require('./src/assets/marker.png'),\n    iconUrl: markerImage,\n    //iconSize: [38, 95],\n    iconAnchor: [22, 94],\n    popupAnchor: [-3, -76],\n    //shadowUrl: ,\n    //shadowSize: [68, 95],\n    //shadowAnchor: [22, 94]\n});\n\n    try {\n        const response = await axios.get('http://0.0.0.0:8000/collection_map/');\n        let data = response.data; // Assuming the API response is an array of marker data\n        console.log(data)\n        data = JSON.parse(data)\n        // console.log(typeof(data2))\n        // console.log(data2.length)\n        // console.log(data2[0])\n        data.forEach(item => {\n            console.log(item)\n            console.log(item.Latitude)\n            console.log(parseFloat(item.Latitude))\n            const marker = L.marker([parseFloat(item.Latitude), parseFloat(item.Longitude)], {icon: myIcon}).addTo(map);\n            if (item.Remarks!=null){\n              popupString = \"<i>\\\"\" + item.Remarks + \"\\\"</i><br>\" + item.Start\n            }\n            else{\n              popupString = item.Start\n            }\n            //marker.bindPopup('<br>Hi CAS!</br>').openPopup();\n            marker.bindPopup(popupString).openPopup();\n            markers.push(marker);\n                    \n    });\n  } catch (error) {\n        console.error('Error fetching data:', error);\n  }    \n}\n\n// function handleMapClick(latLng) {\n//   console.log('Clicked coordinates:', latLng.lat, latLng.lng);\n//   addMarker({ lat: latLng.lat, lng: latLng.lng });\n// }\n\n// function addMarker(position) {\n//   const marker = L.marker(position).addTo(map);\n//   markers.push(marker);\n\n//   marker.on('click', () => {\n//     handleMarkerClick(marker);\n//   });\n// }\n\n// function handleMarkerClick(marker) {\n//   console.log('Clicked marker:', marker);\n//   // Add your logic for handling marker click events here\n// }\n</script>\n\n<script>\nexport default {\n  data() {\n    return {\n      popupOptions: { maxWidth: 200 }, // Customize popup options\n    };\n  },\n  methods: {\n    openPopup(marker) {\n      console.log('Clicked marker:', marker);\n    },\n  },\n};\n</script>\n\n<style>\n\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}