{"ast":null,"code":"import { openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  ref: \"mapContainer\",\n  style: {\n    \"width\": \"60%\",\n    \"height\": \"800px\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, null, 512 /* NEED_PATCH */);\n}","map":{"version":3,"names":["ref","style","_createElementBlock","_hoisted_1"],"sources":["/home/zhu/Documents/github/explorer_front/explorer_front_app/src/components/explorerMap.vue"],"sourcesContent":["<template>\n  <div ref=\"mapContainer\" style=\"width: 60%; height: 800px;\"></div>\n</template>\n\n<script>\nimport { defineComponent } from '@vue/composition-api'\n\nexport default defineComponent({\n    mounted() {\n        fetchCoordinates();\n    },\n})\n</script>\n\n\n<script setup>\nimport { onMounted, ref } from 'vue';\n//import axios from 'axios';\nimport L from 'leaflet';\nimport \"leaflet/dist/leaflet.css\";\n\nconst mapContainer = ref(null);\nlet map;\nlet markers = [];\n\nonMounted(() => {\n  map = L.map(mapContainer.value).setView([0,0],2);\n\n  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    attribution: '&copy; OpenStreetMap contributors',\n  }).addTo(map);\n\n//   const bounds = [[-90, -180], [90, 180]]\n//   map.fitBounds(bounds);\n\n    //fetchCoordinates();\n\n  map.on('click', (event) => {\n    handleMapClick(event.latlng);\n  });\n});\n\nasync function fetchCoordinates(){\n    try {\n        const response = await axios.get('http://0.0.0.0:8000/collection_map/');\n        const data = response.data; // Assuming the API response is an array of marker data\n        console.log(data)\n        data.forEach(item => {\n        const marker = L.marker([item.latitude, item.longitude]).addTo(map);\n        markers.push(marker);\n        // You can customize marker properties and add popup information here\n    });\n  } catch (error) {\n        console.error('Error fetching data:', error);\n  }    \n}\n\nfunction handleMapClick(latLng) {\n  console.log('Clicked coordinates:', latLng.lat, latLng.lng);\n  addMarker({ lat: latLng.lat, lng: latLng.lng });\n}\n\nfunction addMarker(position) {\n  const marker = L.marker(position).addTo(map);\n  markers.push(marker);\n\n  marker.on('click', () => {\n    handleMarkerClick(marker);\n  });\n}\n\nfunction handleMarkerClick(marker) {\n  console.log('Clicked marker:', marker);\n  // Add your logic for handling marker click events here\n}\n</script>\n\n<style>\n\n</style>\n"],"mappings":";;EACOA,GAAG,EAAC,cAAc;EAACC,KAAkC,EAAlC;IAAA;IAAA;EAAA;;;uBAAxBC,mBAAA,CAAiE,OAAjEC,UAAiE","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}