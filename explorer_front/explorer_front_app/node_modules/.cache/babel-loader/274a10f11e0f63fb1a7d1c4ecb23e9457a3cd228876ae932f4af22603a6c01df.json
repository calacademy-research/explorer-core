{"ast":null,"code":"import { createElementVNode as _createElementVNode, createCommentVNode as _createCommentVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-6991b281\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  ref: \"mapContainer\",\n  class: \"map-container\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"iframe-popup\"\n};\nconst _hoisted_3 = [\"src\"];\nexport function render(_ctx, _cache) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_createElementVNode(\"div\", _hoisted_1, null, 512 /* NEED_PATCH */), _ctx.showPopup ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createCommentVNode(\" <iframe :src=\\\"'https://www.morphosource.org/uv.html#?manifest=/manifests/44b0cd03-9165-4367-b20a-8ed303a2f3c4'\\\" width=\\\"560\\\" height =\\\"420\\\" frameborder=\\\"0\\\" allow=\\\"fullscreen; accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\\\"></iframe> \"), _createElementVNode(\"iframe\", {\n    src: _ctx.popupURL,\n    width: \"560\",\n    height: \"420\",\n    frameborder: \"0\",\n    allow: \"fullscreen; accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"\n  }, null, 8 /* PROPS */, _hoisted_3)])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"names":["ref","class","key","_createElementBlock","_createElementVNode","_hoisted_1","_ctx","showPopup","_hoisted_2","_createCommentVNode","src","popupURL","width","height","frameborder","allow","_hoisted_3"],"sources":["/home/zhu/Documents/github/explorer_front/explorer_front_app/src/components/GalapagosMap.vue"],"sourcesContent":["<template>\n<div>\n  <div ref=\"mapContainer\" class=\"map-container\"></div>\n  \n  <div v-if=\"showPopup\" class=\"iframe-popup\">\n    <!-- <iframe :src=\"'https://www.morphosource.org/uv.html#?manifest=/manifests/44b0cd03-9165-4367-b20a-8ed303a2f3c4'\" width=\"560\" height =\"420\" frameborder=\"0\" allow=\"fullscreen; accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"></iframe> -->\n    <iframe :src=popupURL width=\"560\" height =\"420\" frameborder=\"0\" allow=\"fullscreen; accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"></iframe>\n  </div>\n</div>\n</template>\n\n\n\n<script setup>\nimport {ref, onMounted} from 'vue';\nimport L from 'leaflet';\n\nimport markerImage from '@/assets/marker.png'\n\nimport 'leaflet-draw/dist/leaflet.draw.css';\nimport 'leaflet-draw/dist/leaflet.draw';\n//import islandsJSON from '../assets/galapagos.geojson';\n\nconst mapContainer = ref(null);\nconst showPopup = ref(false);\nlet map;\nlet markers = [];\n\nconst iframeURLs = {\n  turtle: 'https://www.morphosource.org/uv.html#?manifest=/manifests/44b0cd03-9165-4367-b20a-8ed303a2f3c4',\n  iguana: 'https://www.morphosource.org/uv.html#?manifest=/manifests/d22b0459-dbfe-4d32-b35e-fac4e0ee33e6',\n};\n\nonMounted(() => {\n      map = L.map(mapContainer.value).setView([-0.207259, -90.142578], 8); // Center coordinates of Hawaii, zoom level 8\n      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);\n      var islandsJSON = {\n    \"type\": \"FeatureCollection\",\n    \"features\": [{\n        \"type\": \"Feature\",\n        \"geometry\": {\n            \"type\": \"Polygon\",\n            \"coordinates\": [[[-91.370975,-0.259036],[-91.373893,-0.261954],[-91.373764,-0.262641],[-91.375566,-0.264315],[-91.37651,-0.263413],[-91.37651,-0.264615],[-91.376177,-0.264948],[-91.376134,-0.265463],[-91.376413,-0.265881],[-91.377068,-0.266171],[-91.377432,-0.266074],[-91.377454,-0.267115],[-91.377947,-0.267512],[-91.378076,-0.267887],[-91.378516,-0.26792],[-91.378741,-0.267705],[-91.379116,-0.267737],[-91.379567,-0.267641],[-91.381176,-0.26822],[-91.381444,-0.26807],[-91.382249,-0.266181],[-91.382216,-0.266021],[-91.382495,-0.265666],[-91.382989,-0.265538],[-91.383579,-0.263886],[-91.385102,-0.262308],[-91.386078,-0.260538],[-91.386893,-0.260603],[-91.386926,-0.260388],[-91.387387,-0.26013],[-91.387483,-0.260259],[-91.387988,-0.260549],[-91.388127,-0.260388],[-91.387977,-0.259615],[-91.387687,-0.259433],[-91.38788,-0.259229],[-91.387676,-0.25895],[-91.386861,-0.258253],[-91.387033,-0.257995],[-91.386647,-0.257223],[-91.386314,-0.256944],[-91.386947,-0.255785],[-91.387322,-0.254938],[-91.387634,-0.254444],[-91.388406,-0.253865],[-91.388213,-0.25335],[-91.387816,-0.253307],[-91.387601,-0.252921],[-91.387183,-0.25261],[-91.387086,-0.252277],[-91.38728,-0.25203],[-91.387794,-0.25188],[-91.387805,-0.251698],[-91.387526,-0.250861],[-91.388127,-0.250389],[-91.388084,-0.250024],[-91.387644,-0.249906],[-91.38744,-0.249412],[-91.387398,-0.248769],[-91.387086,-0.24835],[-91.387011,-0.24673],[-91.38744,-0.24643],[-91.387451,-0.246237],[-91.386893,-0.245883],[-91.386872,-0.245303],[-91.387923,-0.243276],[-91.388953,-0.242804],[-91.389189,-0.242889],[-91.389339,-0.242836],[-91.389586,-0.242353],[-91.389371,-0.242085],[-91.389328,-0.241377],[-91.389521,-0.240937],[-91.390047,-0.24039],[-91.389779,-0.239993],[-91.389897,-0.239338],[-91.389811,-0.238834],[-91.39009,-0.237772],[-91.39068,-0.236527],[-91.390777,-0.236066],[-91.391098,-0.235594],[-91.391023,-0.235369],[-91.391409,-0.234929],[-91.391377,-0.234736],[-91.391903,-0.234113],[-91.392289,-0.234178],[-91.392439,-0.234285],[-91.393147,-0.233952],[-91.393179,-0.233652],[-91.39275,-0.233502],[-91.391699,-0.231646],[-91.391485,-0.229747],[-91.391935,-0.228856],[-91.391753,-0.227676],[-91.391871,-0.227601],[-91.39186,-0.227118],[-91.392107,-0.226828],[-91.392364,-0.226689],[-91.392707,-0.226217],[-91.392772,-0.225348],[-91.393233,-0.224221],[-91.393877,-0.224082],[-91.394381,-0.224221],[-91.395925,-0.223975],[-91.396612,-0.223642],[-91.391609,-0.20977],[-91.381894,-0.203933],[-91.405579,-0.162906],[-91.40781,-0.135269],[-91.40352,-0.118275],[-91.407982,-0.106602],[-91.408497,-0.064716],[-91.411586,-0.042915],[-91.441107,-0.018711],[-91.475948,-0.016994],[-91.524176,-0.042057],[-91.534302,-0.040512],[-91.536533,-0.044975],[-91.544943,-0.045834],[-91.546831,-0.05167],[-91.551465,-0.051327],[-91.551294,-0.049095],[-91.560047,-0.04961],[-91.559017,-0.053387],[-91.561248,-0.05476],[-91.56983,-0.04755],[-91.579784,-0.023346],[-91.583045,-0.023346],[-91.595231,-0.01236],[-91.587851,0.008068],[-91.583045,0.006695],[-91.572233,0.014248],[-91.521602,0.037594],[-91.495514,0.085659],[-91.491566,0.098362],[-91.47303,0.10849],[-91.414332,0.121021],[-91.36044,0.162906],[-91.33624,0.161876],[-91.311182,0.133724],[-91.282177,0.058022],[-91.24047,0.014248],[-91.220733,-0.000515],[-91.198936,-0.021629],[-91.186235,-0.081539],[-91.184519,-0.107632],[-91.188809,-0.141449],[-91.190183,-0.157928],[-91.184175,-0.190715],[-91.18469,-0.19638],[-91.177653,-0.215606],[-91.159804,-0.235519],[-91.150879,-0.24702],[-91.122732,-0.268306],[-91.114665,-0.276545],[-91.112777,-0.280322],[-91.110203,-0.289935],[-91.102136,-0.298689],[-91.100248,-0.304011],[-91.102136,-0.311564],[-91.081883,-0.321692],[-91.064549,-0.333708],[-91.043438,-0.344522],[-91.000702,-0.381429],[-90.970323,-0.418678],[-90.966719,-0.424343],[-90.959853,-0.425373],[-90.952301,-0.422626],[-90.947496,-0.433612],[-90.94475,-0.463309],[-90.941489,-0.473608],[-90.942347,-0.482706],[-90.942862,-0.502446],[-90.948354,-0.530254],[-90.949727,-0.54536],[-90.955906,-0.560637],[-90.952816,-0.581235],[-90.955219,-0.605267],[-90.94269,-0.615566],[-90.904073,-0.610931],[-90.89635,-0.606812],[-90.893432,-0.608013],[-90.880731,-0.627581],[-90.864941,-0.647321],[-90.85533,-0.660882],[-90.851039,-0.675987],[-90.840226,-0.683539],[-90.834906,-0.702421],[-90.828727,-0.703794],[-90.820832,-0.71272],[-90.812766,-0.725422],[-90.804871,-0.723705],[-90.785476,-0.742415],[-90.780327,-0.758035],[-90.781014,-0.766102],[-90.784618,-0.770565],[-90.797147,-0.783438],[-90.815512,-0.789102],[-90.823407,-0.796655],[-90.82478,-0.811588],[-90.82907,-0.828066],[-90.833301,-0.833129],[-90.838364,-0.849264],[-90.838279,-0.857846],[-90.837249,-0.859562],[-90.840681,-0.862051],[-90.844972,-0.871491],[-90.843857,-0.878443],[-90.84686,-0.881361],[-90.849692,-0.889342],[-90.846603,-0.899554],[-90.846088,-0.907793],[-90.84686,-0.912342],[-90.851666,-0.917748],[-90.862908,-0.919121],[-90.869086,-0.917405],[-90.873549,-0.917748],[-90.880843,-0.915174],[-90.887451,-0.919722],[-90.886421,-0.925386],[-90.889682,-0.931994],[-90.8926,-0.932767],[-90.897577,-0.944524],[-90.905644,-0.954994],[-90.924629,-0.960872],[-90.92523,-0.96512],[-90.932438,-0.964305],[-90.934626,-0.962374],[-90.937887,-0.96512],[-90.942937,-0.966236],[-90.951948,-0.961859],[-90.948687,-0.984],[-90.963791,-0.981683],[-90.969025,-0.967695],[-90.962932,-0.963232],[-90.971085,-0.957998],[-90.98533,-0.958512],[-90.996829,-0.971643],[-91.008586,-0.982885],[-91.018712,-0.991123],[-91.038192,-0.993355],[-91.039051,-0.99919],[-91.044714,-0.998504],[-91.049434,-1.002795],[-91.06162,-1.013264],[-91.074578,-1.006227],[-91.100237,-1.015152],[-91.139197,-1.034118],[-91.161667,-1.054285],[-91.174711,-1.057031],[-91.271511,-1.031972],[-91.381698,-1.02648],[-91.453439,-1.000735],[-91.454812,-0.956453],[-91.500466,-0.941692],[-91.523121,-0.888827],[-91.491198,-0.84626],[-91.435247,-0.786528],[-91.334328,-0.705167],[-91.324373,-0.687659],[-91.214873,-0.664658],[-91.112237,-0.634447],[-91.084087,-0.621402],[-91.123219,-0.564413],[-91.227227,-0.47687],[-91.233063,-0.398595],[-91.2643,-0.384175],[-91.341534,-0.329588],[-91.366935,-0.290106],[-91.372207,-0.269765],[-91.371778,-0.265731],[-91.369633,-0.261697],[-91.370975,-0.259036]]]\n        },\n        \"properties\": {\n            \"name\": \"Isabela Island\"\n        }\n    }, {\n        \"type\": \"Feature\",\n        \"geometry\": {\n            \"type\": \"Polygon\",\n            \"coordinates\": [[[-89.700132,-1.344329],[-89.643666,-1.337636],[-89.636629,-1.341411],[-89.617235,-1.393581],[-89.627876,-1.410056],[-89.636801,-1.412458],[-89.686917,-1.40405],[-89.746301,-1.375391],[-89.746988,-1.367668],[-89.717467,-1.351021],[-89.700132,-1.344329]]]\n        },\n        \"properties\": {\n            \"name\": \"Española Island\"\n        }\n    }]\n};\n\n      L.geoJSON(islandsJSON, {\n        style: {\n          color: 'blue',\n          weight: ,\n          fillOpacity: 0.1,\n        },\n      }).addTo(map)\n\n      //L.geoJSON(islandsJSON).addTo(map);\n      console.log('added geojson: ', islandsJSON)\n\n      \n      addMarkers();\n      setupMarkerClickEvents();\n\n      var drawnItems = new L.FeatureGroup();\n      map.addLayer(drawnItems);\n\n      var drawControl = new L.Control.Draw({\n        draw: {\n          polygon: true,\n          polyline: false,\n          rectangle: false,\n          circle: false,\n          marker: false,\n        },\n        edit: {\n          featureGroup: drawnItems,\n          edit: false,\n          remove: false,\n        },\n      });\n\n      map.addControl(drawControl);\n\n      map.on(L.Draw.Event.CREATED, function (event) {\n      var layer = event.layer;\n      drawnItems.addLayer(layer);\n\n      // Do something with the drawn polygon, like getting its coordinates\n      var polygonCoordinates = layer.getLatLngs();\n      console.log(\"layer info\", layer);\n      var geoJSONinfo = layer.toGeoJSON();\n      console.log(\"geoJSON: \", geoJSONinfo);\n      console.log(JSON.stringify(geoJSONinfo.geometry.coordinates));\n      console.log(polygonCoordinates);\n      console.log(JSON.stringify(polygonCoordinates));\n\n      layer.bindPopup('<p>Island <br>'+JSON.stringify(geoJSONinfo)+'</p>');\n  \n      });\n\n\n    //return { mapContainer };\n  });\n  \n  function addMarkers(){\n\n       var myIcon = L.icon({\n        //iconUrl: require('./src/assets/marker.png'),\n        iconUrl: markerImage,\n        //iconSize: [38, 95],\n        //iconAnchor: [22, 94],\n        //popupAnchor: [-3, -76],\n        //shadowUrl: ,\n        //shadowSize: [68, 95],\n        //shadowAnchor: [22, 94]\n      });\n\n      markers = [\n        L.marker([-0.0358333333, -91.3761111111], {icon: myIcon}).bindPopup('turtle').addTo(map),\n        L.marker([-1.3541666667,  -89.6598611111], {icon: myIcon}).bindPopup('iguana').addTo(map)\n      ];\n   }\n\n  function setupMarkerClickEvents(){\n      \n      markers.forEach(marker => {\n        marker.on('click', () =>{\n          openPopup(marker);\n        });\n      });\n   }\n\n  function openPopup(marker){\n      const popupURLKey = marker.getPopup().getContent();\n      //console.log(popupURLKey);\n      popupURL.value = iframeURLs[popupURLKey]\n      //console.log(popupURL)\n      showPopup.value = true;\n   }\n\n\nconst popupURL = ref('');\n\n</script>\n\n<style scoped>\n.map-container {\n  height: 850px; /* Set map container height */\n  width: 80%;\n}\n\n.iframe-popup {\n  position: fixed;\n  top: 0;\n  right: 0;\n  width: 600px; /* Adjust as needed */\n  height: 100%;\n  background-color: white;\n  z-index: 1000;\n}\n\niframe {\n  width: 100%;\n  height: 100%;\n}\n</style>"],"mappings":";;;EAEOA,GAAG,EAAC,cAAc;EAACC,KAAK,EAAC;;;EAFhCC,GAAA;EAIwBD,KAAK,EAAC;;mBAJ9B;;uBACAE,mBAAA,CAOM,cANJC,mBAAA,CAAoD,OAApDC,UAAoD,+BAEzCC,IAAA,CAAAC,SAAS,I,cAApBJ,mBAAA,CAGM,OAHNK,UAGM,GAFJC,mBAAA,+QAAwQ,EACxQL,mBAAA,CAAqK;IAA5JM,GAAG,EAACJ,IAAA,CAAAK,QAAQ;IAACC,KAAK,EAAC,KAAK;IAACC,MAAM,EAAE,KAAK;IAACC,WAAW,EAAC,GAAG;IAACC,KAAK,EAAC;0BAN1EC,UAAA,E,KAAAP,mBAAA,e","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}